/**chartEchartCityMapService
 * Created by yfyuan on 2016/10/28.
 */
'use strict'
discovery.service('chartEchartCityMapService', function (EventService) {
  'ngInject'
  this.instance = null

  this.render = function (containerDom, option, scope, persist, drill, themeFunList) {
    this.instance = new CBoardEChartRender(containerDom, option, undefined, themeFunList)
    return this.instance.chart(null, persist, EventService)
  }

  this.parseOption = function (data) {
    var originalData = data.originalData.data

    var minColor = '#e0ffff'
    if (data.chartConfig.option.maxColor) {
      minColor = data.chartConfig.option.maxColor
    }
    var maxColor = '#006edd'
    if (data.chartConfig.option.minColor) {
      maxColor = data.chartConfig.option.minColor
    }
    data.chartConfig.option.minColor
    var cityMaxRadius = 20
    if (data.chartConfig.option.cityMaxRadius) {
      cityMaxRadius = data.chartConfig.option.cityMaxRadius
    }
    var cityMinRadus = 10
    if (data.chartConfig.option.cityMinRadus) {
      cityMinRadus = data.chartConfig.option.cityMinRadus
    }
    var CityList = convertCityData(originalData)  // 城市坐标及数值
    var maxCity = _.max(CityList, function (CityList) {
      return CityList.value[2]
    })  //数值最大的城市坐标和数值
    var echartOption = {
      tooltip: {
        trigger: 'item'
      },
      visualMap: {
        min: 0,
        max: 1500,
        left: 'left',
        top: 'bottom',
        text: ['High', 'Low'],
        seriesIndex: [1],
        inRange: {
          color: [maxColor, minColor]
        },
        calculable: true
      },
      geo: {
        map: 'china',
        roam: true,
        label: {
          normal: {
            show: true,
            textStyle: {}
          }
        },
        itemStyle: {
          normal: {
            borderColor: '#D5D5D5',
            borderWidth: '1',
            areaColor: '#F5F5F5'
          },
          emphasis: {
            areaColor: null,
            shadowOffsetX: 0,
            shadowOffsetY: 0,
            shadowBlur: 20,
            borderWidth: 0,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        }
      },
      series: [
        {
          type: 'scatter',
          coordinateSystem: 'geo',
          data: convertCityData(originalData),
          symbolSize: (value, params) => {
            let radus = parseInt(value[2]) / parseInt(maxCity.value[2]) * cityMaxRadius
            if (radus < cityMinRadus) {
              return cityMinRadus
            }
            return radus
          },
          // symbol: 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z',
          symbolRotate: 35,
          itemStyle: {
            normal: {
              color: '#F06C00'
            }
          }
        },
        {
          name: 'categoryA',
          type: 'map',
          geoIndex: 0,
          // tooltip: {show: false},
          data: convertProvinceData(originalData),
          label: {
            normal: {
              formatter: '{b}',
              position: 'right',
              show: false
            },
            emphasis: {
              show: true
            }
          }
        }
      ]
    }
    return echartOption
  }
})

const city = {
  '海门': [121.15, 31.89],
  '鄂尔多斯': [109.781327, 39.608266],
  '招远': [120.38, 37.35],
  '舟山': [122.207216, 29.985295],
  '齐齐哈尔': [123.97, 47.33],
  '盐城': [120.13, 33.38],
  '赤峰': [118.87, 42.28],
  '青岛': [120.33, 36.07],
  '乳山': [121.52, 36.89],
  '金昌': [102.188043, 38.520089],
  '泉州': [118.58, 24.93],
  '莱西': [120.53, 36.86],
  '日照': [119.46, 35.42],
  '胶南': [119.97, 35.88],
  '南通': [121.05, 32.08],
  '拉萨': [91.11, 29.97],
  '云浮': [112.02, 22.93],
  '梅州': [116.1, 24.55],
  '文登': [122.05, 37.2],
  '攀枝花': [101.718637, 26.582347],
  '威海': [122.1, 37.5],
  '承德': [117.93, 40.97],
  '厦门': [118.1, 24.46],
  '汕尾': [115.375279, 22.786211],
  '潮州': [116.63, 23.68],
  '丹东': [124.37, 40.13],
  '太仓': [121.1, 31.45],
  '曲靖': [103.79, 25.51],
  '烟台': [121.39, 37.52],
  '福州': [119.3, 26.08],
  '瓦房店': [121.979603, 39.627114],
  '即墨': [120.45, 36.38],
  '抚顺': [123.97, 41.97],
  '玉溪': [102.52, 24.35],
  '张家口': [114.87, 40.82],
  '阳泉': [113.57, 37.85],
  '莱州': [119.942327, 37.177017],
  '湖州': [120.1, 30.86],
  '汕头': [116.69, 23.39],
  '昆山': [120.95, 31.39],
  '宁波': [121.56, 29.86],
  '湛江': [110.359377, 21.270708],
  '揭阳': [116.35, 23.55],
  '荣成': [122.41, 37.16],
  '连云港': [119.16, 34.59],
  '葫芦岛': [120.836932, 40.711052],
  '常熟': [120.74, 31.64],
  '东莞': [113.75, 23.04],
  '河源': [114.68, 23.73],
  '淮安': [119.15, 33.5],
  '泰州': [119.9, 32.49],
  '南宁': [108.33, 22.84],
  '营口': [122.18, 40.65],
  '惠州': [114.4, 23.09],
  '江阴': [120.26, 31.91],
  '蓬莱': [120.75, 37.8],
  '韶关': [113.62, 24.84],
  '嘉峪关': [98.289152, 39.77313],
  '延安': [109.47, 36.6],
  '太原': [112.53, 37.87],
  '清远': [113.01, 23.7],
  '中山': [113.38, 22.52],
  '昆明': [102.73, 25.04],
  '寿光': [118.73, 36.86],
  '盘锦': [122.070714, 41.119997],
  '长治': [113.08, 36.18],
  '珠海': [113.52, 22.3],
  '宿迁': [118.3, 33.96],
  '咸阳': [108.72, 34.36],
  '铜川': [109.11, 35.09],
  '平度': [119.97, 36.77],
  '佛山': [113.11, 23.05],
  '海口': [110.35, 20.02],
  '江门': [113.06, 22.61],
  '章丘': [117.53, 36.72],
  '肇庆': [112.44, 23.05],
  '大连': [121.62, 38.92],
  '临汾': [111.5, 36.08],
  '吴江': [120.63, 31.16],
  '石嘴山': [106.39, 39.04],
  '沈阳': [123.38, 41.8],
  '茂名': [110.88, 21.68],
  '嘉兴': [120.76, 30.77],
  '长春': [125.35, 43.88],
  '胶州': [120.03336, 36.264622],
  '银川': [106.27, 38.47],
  '张家港': [120.555821, 31.875428],
  '三门峡': [111.19, 34.76],
  '锦州': [121.15, 41.13],
  '南昌': [115.89, 28.68],
  '柳州': [109.4, 24.33],
  '三亚': [109.511909, 18.252847],
  '自贡': [104.778442, 29.33903],
  '阳江': [111.95, 21.85],
  '泸州': [105.39, 28.91],
  '西宁': [101.74, 36.56],
  '宜宾': [104.56, 29.77],
  '呼和浩特': [111.65, 40.82],
  '大同': [113.3, 40.12],
  '镇江': [119.44, 32.2],
  '桂林': [110.28, 25.29],
  '张家界': [110.479191, 29.117096],
  '宜兴': [119.82, 31.36],
  '北海': [109.12, 21.49],
  '西安': [108.95, 34.27],
  '金坛': [119.56, 31.74],
  '东营': [118.49, 37.46],
  '遵义': [106.9, 27.7],
  '绍兴': [120.58, 30.01],
  '扬州': [119.42, 32.39],
  '常州': [119.95, 31.79],
  '潍坊': [119.1, 36.62],
  '台州': [121.420757, 28.656386],
  '南京': [118.78, 32.04],
  '滨州': [118.03, 37.36],
  '贵阳': [106.71, 26.57],
  '本溪': [123.73, 41.3],
  '克拉玛依': [84.77, 45.59],
  '渭南': [109.5, 34.52],
  '马鞍山': [118.48, 31.56],
  '宝鸡': [107.15, 34.38],
  '焦作': [113.21, 35.24],
  '句容': [119.16, 31.95],
  '徐州': [117.2, 34.26],
  '衡水': [115.72, 37.72],
  '绵阳': [104.73, 31.48],
  '枣庄': [117.57, 34.86],
  '杭州': [120.19, 30.26],
  '淄博': [118.05, 36.78],
  '鞍山': [122.85, 41.12],
  '溧阳': [119.48, 31.43],
  '库尔勒': [86.06, 41.68],
  '安阳': [114.35, 36.1],
  '开封': [114.35, 34.79],
  '济南': [117, 36.65],
  '德阳': [104.37, 31.13],
  '温州': [120.65, 28.01],
  '九江': [115.97, 29.71],
  '邯郸': [114.47, 36.6],
  '临安': [119.72, 30.23],
  '兰州': [103.73, 36.03],
  '沧州': [116.83, 38.33],
  '临沂': [118.35, 35.05],
  '南充': [106.110698, 30.837793],
  '富阳': [119.95, 30.07],
  '泰安': [117.13, 36.18],
  '诸暨': [120.23, 29.71],
  '郑州': [113.65, 34.76],
  '聊城': [115.97, 36.45],
  '芜湖': [118.38, 31.33],
  '平顶山': [113.29, 33.75],
  '邢台': [114.48, 37.05],
  '德州': [116.29, 37.45],
  '济宁': [116.59, 35.38],
  '荆州': [112.239741, 30.335165],
  '宜昌': [111.3, 30.7],
  '义乌': [120.06, 29.32],
  '丽水': [119.92, 28.45],
  '洛阳': [112.44, 34.7],
  '秦皇岛': [119.57, 39.95],
  '株洲': [113.16, 27.83],
  '莱芜': [117.67, 36.19],
  '常德': [111.69, 29.05],
  '湘潭': [112.91, 27.87],
  '岳阳': [113.09, 29.37],
  '长沙': [113, 28.21],
  '衢州': [118.88, 28.97],
  '廊坊': [116.7, 39.53],
  '菏泽': [115.480656, 35.23375],
  '冷饮华东大区': [121.638481, 31.230895],
  '冷饮晋冀蒙大区': [111.660351, 40.828319],
  '冷饮华北大区': [116.521695, 39.958953],
  '冷饮上海直辖区域': [121.487899, 31.249162],
  '冷饮蒙晋大区': [111.660351, 40.828319],
  '冷饮京津大区': [116.521695, 39.958953],
  /**
   * **/
  "乌鲁木齐": [87.583, 43.8],
  "金山工厂": [111.73, 40.83],
  "天津工厂": [117.03, 39.38],
  "密云工厂": [116.83, 40.37],
  "呼市直营": [111.73, 40.83],
  "河南工厂": [113.18, 33.77],
  "肇东工厂": [127, 46.63],
  "沈阳工厂": [123.38, 41.8],
  "苏州工厂": [120.62, 31.32],
  "成都工厂": [103.47, 30.42],
  "衡阳分仓": [112.57, 26.9],
  "青岛分仓": [120.38, 36.07],
  "济南分仓": [116.98, 36.67],
  "天津直营": [117.2005692, 39.14493942],
  "天津分仓": [117.2005692, 39.14493942],
  "上海直营": [121.458, 31.222],
  "南京直营": [118.777, 32.061],
  "天津（分）": [117.13, 39.22],
  "杭州直营": [120.62, 31.32],
  "合肥直营": [117.25, 31.83],
  "西安直营": [108.93, 34.27],
  "武汉直营": [114.31, 30.52],
  "武汉（直）": [114.3, 30.6],
  "深圳直营": [114.07, 22.62],
  "惠州工厂": [114.4, 23.09],
  "太原分仓": [112.53, 37.87],
  "西安分仓": [108.93, 34.27],
  "长沙分仓": [112.93, 28.23],
  "武汉分仓": [114.3, 30.6],
  "南昌分仓": [115.89, 28.68],
  "昆明分仓": [102.73, 25.04],
  "常德分仓": [111.69, 29.05],
  "兰州分仓": [103.73, 36.03],
  "吉安分仓": [114.97, 27.12],
  "厦门分仓": [118.1, 24.46],
  "柳州分仓": [109.4, 24.33],
  "南平分仓": [118.16, 26.65],
  "西南直采": [104.07, 30.67],
  "黄冈工厂": [114.87, 30.44],
  "广佛分仓": [113.27, 23.13],
  "定州工厂": [114.98, 36.67],
  "金川工厂": [111.73, 40.83],
  "北京（东分）": [116.65, 39.92],
  "北京分仓": [116.23, 40.22],
  "北京南直营": [116.219, 40.218],
  "北京北直营": [116.219, 40.218],
  "呼市分仓": [111.652, 40.81],
  "成都分仓": [104.15, 30.83],
  "肇东分仓": [125.983, 46.083],
  "郑州分仓": [113.648, 34.757],
  "调拨库": [124.45, 46.87],
  "新疆分仓": [87.583, 43.8],
  "合肥分仓": [117.28, 31.863],
  "重庆分仓": [106.254, 29.29],
  "广州分仓": [113.35, 23.12],
  "贵阳分仓": [106.716, 26.583],
  "北京直营": [116.46, 39.92],
  // "漯河暂存库":[114.02,33.56],
  "合肥新鲜度项目试点库": [117.28, 31.863],
  "海口分仓": [110.341, 20.045],
  "呼市暂存库": [111.652, 40.81],
  "巴盟分仓": [107.42, 40.77],
  "定州分仓": [114.995, 38.513],
  "辽宁分仓": [123.432, 41.792],
  "乌鲁木齐分仓": [87.583, 43.8],
  "拉萨分仓": [91.1, 29.65],
  "福州分仓": [119.306, 26.061],
  // "武汉暂存库":[114.266,30.583],
  "徐州分仓": [117.157, 34.18],
  "杭州分仓": [120.168, 30.255],
  // "潍坊暂存库":[119.143,36.7161],
  // "龙游暂存库":[118.876,28.9569],
  // "南京暂存库":[118.777,32.061],
  // "黄冈伊利暂存库":[114.907,30.4461],
  // "成都伊利暂存库":[104.066,30.666],
  // "广东暂存库":[114.4,23.083],
  "北京北暂存库": [116.329, 39.721],
  "北京南暂存库": [116.219, 40.218],
  "天津暂存库": [117.201, 39.1449],
  "上海暂存库": [121.458, 31.222],
  // "晋中伊利暂存库":[112.735,37.681],
  "南充暂存库": [106.084, 30.795],
  // "济源暂存库":[112.587,35.0888],
  // "苏南暂存库":[121.27,30.38],
  "黄冈伊利中心仓": [114.907, 30.4461],
  "肇东暂存库": [125.983, 46.083],
  "苏南暂存库": [121.27, 31.38],
  "贵阳暂存库": [106.716, 26.583],
  "郑州暂存库": [113.648, 34.757],
  "乌鲁木齐成品暂存库": [87.583, 43.8],
  "兰州成品暂存库": [103.792, 36.056],
  "北京暂存库北库": [116.219, 40.218],
  "南京暂存库": [118.777, 32.061],
  "南昌暂存库": [115.883, 28.683],
  "合肥成品暂存库": [117.28, 31.863],
  "定州成品暂存库": [114.995, 38.513],
  "巴彦淖尔成品暂存库": [107.42, 40.77],
  "广东暂存库": [114.4, 23.083],
  "广州暂存库": [113.131, 23.026],
  "徐州暂存库": [117.157, 34.18],
  "成都伊利暂存库": [104.066, 30.666],
  "成都暂存库": [104.066, 30.666],
  "液奶拉萨分仓": [91.1, 29.65],
  "液奶昆明暂存库": [102.718, 25.038],
  "液奶柳州暂存库": [109.169, 21.668],
  "液奶重庆暂存库": [106.254, 29.29],
  "漯河暂存库": [114.02, 33.56],
  "潍坊暂存库": [119.1426, 36.71611],
  "福州暂存库": [119.306, 26.061],
  "晋中伊利暂存库": [112.7345, 37.681],
  "晋南暂存库": [108.928, 34.258],
  "杭州暂存库": [120.168, 30.255],
  "武汉暂存库": [114.266, 30.583],
  "沈阳暂存库": [123.432, 41.792],
  "泰普克成品暂存库": [108.928, 34.258],
  "济南暂存库": [116.997, 36.668],
  "济源暂存库": [112.5873, 35.0888],
  "液奶乌鲁木齐伊利": [87.583, 43.8],
  "液奶兰州乳业": [103.792, 36.056],
  "长沙暂存库": [112.966, 28.2],
  "黄冈伊利暂存库": [114.9066, 30.44611],
  "龙游暂存库": [118.8758, 28.95691],
  "北京暂存库南库": [116.329, 39.721],
  "海口仓": [110.341, 20.045],
  "液奶南充暂存库": [106.084, 30.795],
  "西藏": [91.17849, 29.658434],
  "安徽": [117.233592, 31.826705],
  "川南": [104.693255, 28.81582],
  "湖北外埠": [114.311831, 30.598426],
  "武汉": [114.311831, 30.598426],
  "无锡": [120.313232, 31.579529],
  "广州": [113.30765, 23.120049],
  "闽北": [119.330221, 26.047125],
  "鄂东": [114.311831, 30.598426],
  "吉西": [122.260363, 43.633756],
  "豫北区域": [114.3995, 36.103636],
  "甘青藏": [103.823305, 36.064226],
  "蒙西": [109.787493, 39.61474],
  "苏中": [118.778074, 32.057236],
  "金华": [119.652576, 29.102899],
  "直营一区": [116.4, 39.9],
  "陕南": [108.953098, 34.2778],
  "郑州区域": [113.649644, 34.75661],
  "北京北郊区域": [116.728229, 40.154951],
  "上海经销区域": [121.53, 31.22],
  "济南区域": [117.126488, 36.65819],
  "吉林": [125.344899, 43.998252],
  "湖南": [112.945393, 28.234248],
  "广东": [113.270793, 23.135303],
  "辽宁": [123.453552, 41.798305],
  "广西": [108.372627, 22.823604],
  "陕西": [108.953098, 34.2778],
  "四川": [104.07214, 30.578832],
  "成都": [104.07214, 30.578832],
  "闽南": [118.103886, 24.489231],
  "鄂西": [109.47, 30.3],
  "牡丹江": [129.608035, 44.588521],
  "贵州": [106.724173, 26.541413],
  "呼包宁": [111.660351, 40.828319],
  "豫西": [112.390753, 34.671668],
  "鲁西区域": [117.126488, 36.65819],
  "云南区域": [101.55, 25.03],
  "川北": [104.124269, 30.606302],
  "海南": [110.330802, 20.022071],
  "重庆区域": [106.530635, 29.544606],
  "石家庄": [114.522082, 38.048958],
  "常德区域": [111.653718, 29.012149],
  "赣南区域": [114.935909, 25.845296],
  "上海特通组": [121.75, 31.05],
  "巴氏奶哈尔滨": [126.541745, 45.808985],
  "黑龙江": [126.792044, 45.710449],
  "浙南": [120.565799, 28.067865],
  "广州直营": [113.270793, 23.135303],
  "浙江": [120.162142, 30.278988],
  "苏州": [120.591427, 31.307026],
  "广东外埠": [113.270793, 23.135303],
  "四川外埠": [107.474504, 31.214344],
  "辽西": [123.432791, 41.808645],
  "吉东": [125.313642, 43.898338],
  "浙西": [120.219375, 30.259244],
  "苏中区域": [118.802962, 32.064792],
  "鄂东区域": [114.87, 30.45],
  "豫北": [113.708011, 34.797406],
  "云贵区域": [107.5, 26.7],
  "鲁西南": [116.600798, 35.402122],
  "鲁南": [116.600798, 35.402122],
  "北京南郊区域": [116.740079, 39.809815],
  "北京市区经销区域": [116.521695, 39.958953],
  "包头": [109.846755, 40.663633],
  "江西": [115.864758, 28.68833],
  "蒙晋": [113.138484, 41.000889],
  "重庆": [106.558106, 29.56911],
  "湘北": [113.021311, 25.776709],
  "湘南": [112.945393, 28.234248],
  "福建": [119.303339, 26.080457],
  "河南区域": [113.631768, 34.753427],
  "鄂西区域": [112.250093, 32.229169],
  "赣北": [115.959851, 29.667088],
  "北京": [116.521695, 39.958953],
  "蒙银": [106.238976, 38.492391],
  "保定": [115.49481, 38.886565],
  "直营区域": [116.521695, 39.958953],
  "天津直营区域": [117.207137, 39.089475],
  "上海直营二区": [121.5, 31.27],
  "巴氏奶大庆": [125.110456, 46.594889],
  "信阳区域": [114.099264, 32.153182],
  "苏南": [119.635313, 31.26495],
  "新疆": [87.549219, 43.898324],
  "呼市": [111.755186, 40.848657],
  "云贵": [106.724173, 26.541413],
  "哈尔滨": [126.657717, 45.773225],
  "大庆": [125.02184, 46.596709],
  "蒙东": [113.138484, 41.000889],
  "浙东": [121.579006, 29.885259],
  "直营二区": [117.2, 39.12],
  "晋南": [111.474665, 36.125937],
  "陕北": [109.483933, 34.502358],
  "上海直营一区": [121.43, 31.18],
  "深圳": [114.025974, 22.546054],
  "上海": [121.480237, 31.2363],
  "湖北区域": [114.311831, 30.598426],
  "湖南区域": [112.945393, 28.234248],
  "晋北": [113.306205, 40.082539],
  "山西": [112.555135, 37.876812],
  "鲁中": [119.142634, 36.716115],
  "豫南": [113.941362, 33.670704],
  "鲁中区域": [117.126488, 36.65819],
  "鲁东区域": [120.388969, 36.073179],
  "冀北": [114.892592, 40.774341],
  "漯河区域": [114.046061, 33.576279],
  "洛阳区域": [112.447525, 34.657368],
  "济宁区域": [116.593803, 35.420956],
  "甘青": [103.771994, 35.992495],
  "桂琼": [108.372627, 22.823604],
  "浙北": [120.088993, 30.207036],
  "江苏": [118.802962, 32.064792],
  "辽东": [121.593478, 38.94871],
  "豫南区域": [114.028713, 33.019078],
  "川北区域": [105.849862, 32.441794],
  "川南区域": [103.760824, 29.600958],
  "赣南": [114.94126, 25.837178],
  "蒙中": [118.757106, 42.268753],
  "冀南": [114.511441, 36.631195],
  "湘北区域": [112.950575, 27.835846],
  "宁夏": [106.206479, 38.502621],
  "经销一区": [116.7, 39.52],
  "合肥": [117.247835, 31.912901],
  "皖北区域": [117.233592, 31.826705],
  "赣北区域": [115.893528, 28.689578],
  "巴氏奶牡丹江": [129.640285, 44.558309],
  "新疆区域": [87.623193, 43.831481],
  "市区经销区域": [116.521695, 39.958953],
  "湖北": [114.311831, 30.598426],
  "皖南": [117.233592, 31.826705],
  "粤东": [114.065944, 22.548554],
  "粤西": [110.931773, 21.669043],
  "蒙宁": [106.238976, 38.492391],
  "苏北": [117.188107, 34.271553],
  "苏南区域": [119.635313, 31.26495],
  "云南": [102.839607, 24.886079],
  "江西区域": [115.864758, 28.68833],
  "湘南区域": [112.950575, 27.835846],
  "鲁东": [120.384428, 36.105215],
  "天津": [117.207137, 39.089475],
  "鲁西": [117.024967, 36.682785],
  "皖北": [117.282699, 31.866942],
  "贵州区域": [106.933648, 27.731899],
  "经销二区": [116.521695, 39.958953],
  "经销三区": [117.2, 39.12],
  "经销四区": [118.2, 39.63],
  "唐山": [118.183451, 39.650531],
  "衡阳区域": [112.583819, 26.898164],
  "长沙区域": [112.979353, 28.213478],
  "青岛区域": [120.388969, 36.073179],
  "山东": [117.024967, 36.682785],
  "西北": [108.953098, 34.2778],
  // "西南": [104.067923, 30.679943],
  "京津": [116.395645, 39.929986],
  "奶粉华中大区": [114.332868, 30.656091],
  "奶粉闽赣大区": [119.27345, 26.04769],
  "奶粉西南大区": [104.124269, 30.606302],
  "奶粉华南大区": [113.234423, 23.093666],
  "两湖": [114.3162, 30.581084],
  "奶粉华东大区": [121.638481, 31.230895],
  "晋冀蒙": [111.660351, 40.828319],
  "酸奶西北大区": [108.953098, 34.2778],
  "酸奶西南大区": [104.067923, 30.679943],
  "酸奶华中大区": [114.3162, 30.581084],
  "冷饮西北大区": [111.755869, 40.84906],
  "冷饮西南大区": [104.073543, 30.658068],
  "酸奶华南大区": [113.30765, 23.120049],
  "冷饮华南大区": [113.266109, 23.144061],
  "浙沪": [121.487899, 31.249162],
  "冷饮鲁豫大区": [117.117993, 36.660062],
  "冷饮华中大区": [114.305645, 30.610203],
  "酸奶东北大区": [123.432791, 41.808645],
  "闽赣": [119.330221, 26.047125],
  "酸奶晋冀蒙大区": [111.660351, 40.828319],
  // "酸奶浙沪大区": [118.778074, 32.057236],
  "酸奶浙沪大区": [121.487899, 31.249162],
    "酸奶京津大区": [116.521695, 39.958953],
  "云贵广": [108.297234, 22.806493],
  "奶粉西北大区": [108.953098, 34.2778],
  "粤海": [113.30765, 23.120049],
  "酸奶苏皖大区": [118.778074, 32.057236],
  "酸奶鲁豫大区": [117.024967, 36.682785],
  // "酸奶苏皖大区": [121.487899, 31.249162],
  "冷饮浙沪大区": [121.479949, 31.236197],
  "奶粉华北大区": [116.521695, 39.958953],
  "奶粉苏皖大区": [118.765057, 32.05724],
  "奶粉蒙晋大区": [111.660351, 40.828319],
  "东北": [123.432791, 41.808645],
  "奶粉东北大区": [123.453552, 41.798305],
  "冷饮京津冀大区": [117.20459, 39.094829],
  "冷饮东北大区": [123.432592, 41.818304],
  "苏皖": [118.778074, 32.057236],
  "冷饮苏皖大区": [117.233613, 31.826381],
  "河南": [113.649644, 34.75661],
  "奶粉鲁豫大区": [113.708011, 34.797406],
  "销售部软冰业务": [118.864332, 28.985379],
  "华东": [121.480237,31.2363],
  "华南": [113.270793,23.135303],
  // 电子商务单元: [],
  // 京东直供: [],
  北部:	[116.413624,39.910837],
  // 缺省: [],
  华北:	[117.126488,36.65819],
  东南:	[119.303339,	26.080457],
  西南:	[104.07214,	30.578832],
  华中:	[114.311831,	30.598426],
  // 杂项: [],

}
const province = {
  '北京': true,
  '天津': true,
  '上海': true,
  '重庆': true,
  '河北': true,
  '河南': true,
  '云南': true,
  '辽宁': true,
  '黑龙江': true,
  '湖南': true,
  '安徽': true,
  '山东': true,
  '新疆': true,
  '江苏': true,
  '浙江': true,
  '江西': true,
  '湖北': true,
  '广西': true,
  '甘肃': true,
  '山西': true,
  '内蒙古': true,
  '陕西': true,
  '吉林': true,
  '福建': true,
  '贵州': true,
  '广东': true,
  '青海': true,
  '西藏': true,
  '四川': true,
  '宁夏': true,
  '海南': true,
  '台湾': true,
  '香港': true,
  '澳门': true
}

function convertCityData(allData) {
  let data = allData.data
  let keys = allData.keys
  var res = []
  for (var i = 0; i < data.length; i++) {
    let itemData = data[i]
    for (var j = 0; j < itemData.length; j++) {
      var geoCoord = city[keys[j][0]]
      var eventInfo = CBoardEChartRenderEventInfo(allData, undefined, j)
      if (i === 0) {
        let obj = {
          name: keys[j][0],
          value: (geoCoord && geoCoord.length === 2) ? geoCoord.concat(data[i][j]) : [null, null],
          eventInfo: eventInfo
        }
        res.push(obj)
      } else {
        if (res[j] && res[j].value) {
          res[j].value = res[j].value.concat(data[i][j])
        }
      }
    }
  }
  return res
}

function convertProvinceData(data) {
  var res = []
  for (var i = 0; i < data.length; i++) {
    var geoCoord = province[data[i][0]]
    if (geoCoord) {
      res.push({
        name: data[i][0],
        value: data[i][1]
      })
    }
  }
  return res
}
